

#include <iostream>
#include <vector>
using namespace std;

template <class T,int nbits, int esbits>
struct PositTable;

template<> struct PositTable<int8_t,4,0>{
static constexpr int8_t mul[16][16] = {{0,0,0,0,0,0,0,0,8,0,0,0,0,0,0,0},{0,1,1,1,1,2,2,4,8,12,14,14,15,15,15,15},{0,1,1,2,2,3,4,6,8,10,12,13,14,14,15,15},{0,1,2,2,3,4,5,6,8,10,11,12,13,14,14,15},{0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15},{0,2,3,4,5,6,6,7,8,9,10,10,11,12,13,14},{0,2,4,5,6,6,7,7,8,9,9,10,10,11,12,14},{0,4,6,6,7,7,7,7,8,9,9,9,9,10,10,12},{8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8},{0,12,10,10,9,9,9,9,8,7,7,7,7,6,6,4},{0,14,12,11,10,10,9,9,8,7,7,6,6,5,4,2},{0,14,13,12,11,10,10,9,8,7,6,6,5,4,3,2},{0,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1},{0,15,14,14,13,12,11,10,8,6,5,4,3,2,2,1},{0,15,15,14,14,13,12,10,8,6,4,3,2,2,1,1},{0,15,15,15,15,14,14,12,8,4,2,2,1,1,1,1}};
static constexpr int8_t add[16][16] = {{0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15},{1,2,3,4,4,6,6,7,8,9,10,12,13,14,15,0},{2,3,4,4,5,6,6,7,8,9,11,12,14,15,0,1},{3,4,4,5,6,6,6,7,8,9,12,13,15,0,1,2},{4,4,5,6,6,6,6,7,8,10,12,14,0,1,2,3},{5,6,6,6,6,6,7,7,8,10,14,0,2,3,4,4},{6,6,6,6,6,7,7,7,8,10,0,2,4,4,5,6},{7,7,7,7,7,7,7,7,8,0,6,6,6,7,7,7},{8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8},{9,9,9,9,10,10,10,0,8,9,9,9,9,9,9,9},{10,10,11,12,12,14,0,6,8,9,9,9,10,10,10,10},{11,12,12,13,14,0,2,6,8,9,9,10,10,10,10,10},{12,13,14,15,0,2,4,6,8,9,10,10,10,10,11,12},{13,14,15,0,1,3,4,7,8,9,10,10,10,11,12,12},{14,15,0,1,2,4,5,7,8,9,10,10,11,12,12,13},{15,0,1,2,3,4,6,7,8,9,10,10,12,12,13,14}};
static constexpr int8_t sub[16][16] = {{0,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1},{1,0,15,14,13,12,10,9,8,7,6,6,4,4,3,2},{2,1,0,15,14,12,11,9,8,7,6,6,5,4,4,3},{3,2,1,0,15,13,12,9,8,7,6,6,6,5,4,4},{4,3,2,1,0,14,12,10,8,7,6,6,6,6,5,4},{5,4,4,3,2,0,14,10,8,7,7,6,6,6,6,6},{6,6,5,4,4,2,0,10,8,7,7,7,6,6,6,6},{7,7,7,7,6,6,6,0,8,7,7,7,7,7,7,7},{8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8},{9,9,9,9,9,9,9,9,8,0,10,10,10,9,9,9},{10,10,10,10,10,9,9,9,8,6,0,14,12,12,11,10},{11,10,10,10,10,10,9,9,8,6,2,0,14,13,12,12},{12,12,11,10,10,10,10,9,8,6,4,2,0,15,14,13},{13,12,12,11,10,10,10,9,8,7,4,3,1,0,15,14},{14,13,12,12,11,10,10,9,8,7,5,4,2,1,0,15},{15,14,13,12,12,10,10,9,8,7,6,4,3,2,1,0}};
static constexpr int8_t div[16][16] = {{8,0,0,0,0,0,0,0,8,0,0,0,0,0,0,0},{8,4,2,1,1,1,1,1,8,15,15,15,15,15,14,12},{8,6,4,3,2,1,1,1,8,15,15,15,14,13,12,10},{8,6,5,4,3,2,2,1,8,15,14,14,13,12,11,10},{8,7,6,5,4,3,2,1,8,15,14,13,12,11,10,9},{8,7,6,6,5,4,3,2,8,14,13,12,11,10,10,9},{8,7,7,6,6,5,4,2,8,14,12,11,10,10,9,9},{8,7,7,7,7,6,6,4,8,12,10,10,9,9,9,9},{8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8},{8,9,9,9,9,10,10,12,8,4,6,6,7,7,7,7},{8,9,9,10,10,11,12,14,8,2,4,5,6,6,7,7},{8,9,10,10,11,12,13,14,8,2,3,4,5,6,6,7},{8,9,10,11,12,13,14,15,8,1,2,3,4,5,6,7},{8,10,11,12,13,14,14,15,8,1,2,2,3,4,5,6},{8,10,12,13,14,15,15,15,8,1,1,1,2,3,4,6},{8,12,14,15,15,15,15,15,8,1,1,1,1,1,2,4}};
};


#include <posit.h>
using namespace posit;
#include <iomanip>




int main() {
    using PPEMU = Posit<int8_t, 4, 0, uint8_t, PositSpec::WithInfs>;
    using PP = Posit<int8_t, 4, 0, TabulatedBackend<int8_t,PPEMU,PositTable<int8_t,4,0>>, PositSpec::WithInfs>;
    PP a(0.5f), b(0.25f);
    std::cout << a+b << std::endl;
    std::cout << a*b << std::endl;
    std::cout << a-b << std::endl;
    return 0;
}
